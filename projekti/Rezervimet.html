<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezervimet</title>
    <link rel="icon" href="tl.png" type="image/x-icon">
    <link rel="stylesheet" href="Rezervimet-style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <style>
        body {
            box-shadow: none;
        }
        swal2-input{
            border-radius: 5px;
            background-color: #000;
            color: #ffffff;
        
        }

        header.scrolled {
            background-color: #000;
        }

        .swal2-popup {
            background-color: #000 !important;
            color: #fff !important;
        }

        .swal2-title {
            color: #ffffff !important;
        }

        .swal2-content {
            color: #ccc !important;
        }

        .swal2-confirm {
            color: #000000 !important;
            background-color: #ffffff !important;
            width: 100px; 
            height: 40px; 
            font-size: 16px; 
        }

        .swal2-popup-animation-show {
            opacity: 1;
            transform: scale(0.5);
            transition: opacity 0.3s, transform 0.3s;
        }

        .swal2-popup-animation-show.swal2-shown {
            opacity: 1;
            transform: scale(1);
        }

        .swal2-popup-animation-hide {
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.3s, transform 0.3s;
        }

        .swal2-popup-animation-hide.swal2-hidden {
            opacity: 1;
            transform: scale(0.5);
        }
    </style>
</head>

<body>
    <header>
        <div id="myElement">
            <img src="moon-landing-moon.gif" alt="">
        </div>
            <audio autoplay id="myAudio">
                <source src="Original Playstation 2 Intro.mp3" type="audio/mp3">
               
            </audio>
    
    <img src="ObvP.png" alt="Observatory of Prishtina">
        <nav>
            <ul> <li><a href="/homepage/homepage.html">Home</a></li>
                <li><a href="/FINAL/Evente.html">Eventet</a></li>
                <li><a href="/Faktepage.html">Fakte</a></li>
                <li><a href="/About-us/about-us.html">Rreth nesh</a></li>
                <li><a href="/projekti/Qasja.html">Qasja</a></li>
            </ul>
        </nav>
    </header>

    <br><br><br><br><br> <br><br><br><br><br>

    <form id="reservationForm">
        <div class="wrapper">
            <label for="Data"><b>Data:</b></label>
            <input type="date" id="todayDate" value="">

            <br><br>
            <label for="Koha"><b>Koha:</b></label>
            <input type="time" id="Koha" name="Koha" step="3600" oninput="formatTimeInput()">
            <button type="button" id="registerButton" onclick="validateReservation()">Rezervo</button>
        </div>
    </form>
<article>
    <div class="container">
        <h1>Exploro universin ne observatorin tonë</h1>
        <ol>
            <h3>Vizita në observatorin tonë është një përvojë e mbresëlënë për disa arsye: </h3>
            <li><strong>Observimi i Yjeve:</strong> Teleskopë të fuqishëm ofrojnë pamje nga afër të planeteve, yjeve dhe galaksive.</li>
            <li><strong>Arsimimi:</strong> Observatorët ofrojnë programe dhe udhëtime për njohjen më të thellë të astronomisë.</li>
            <li><strong>Ngjarje Speciale:</strong> Shihni ngjarje të rralla qiellore si shiuj dhe eklipse.</li>
            <li><strong>Vendndodhjet me Qiell të Errët:</strong> larg dritave të qytetit, observatorët ofrojnë pamje të qarta të qiellit të natës.</li>
            <li><strong>Facilitetet e Kërkimit:</strong> Disa observatorë angazhohen në kërkime astronomike të përparuara.</li>
            <li><strong>Inspirimi:</strong> Observatorët shkaktojnë mrekulli dhe frymëzojnë një vlerësim për kozmosin.</li>
            <li><strong>Fotografi:</strong> Ideale për astrofotografi me qiell të qartë dhe pajisje të avancuara.</li>
            <li><strong>Komuniteti:</strong> Ngjarjet nxisin një ndjenjë komuniteti midis entuziastëve të astronomisë.</li>
        </ol>
    </div>
    <div class="container1">
        <h1>Udhëzimet për Rezervime</h1>
<ol>
    <li>Rezervimet zgjasin 1 orë.</li>
    <br>
    <li>Rezervimet në ditët e javës mund të bëhen nga ora 10:00 deri në ora 19:00.</li>
    <br>
    <li>Rezervimet në fundjavë mund të bëhen nga ora 11:00 deri në ora 19:00.</li>
    <br>
    <li>E hëna është e mbyllur.</li>
   <br>
    <li>Rezervimet duhet të bëhen 1 ditë paraprakisht.</li>
    <br>
    <li>Gjatë verifikimit, sigurohuni që të dhënat e dhëna janë valide.</li>
    <br>
    <li>Rezervimi bëhet vetëm ne orë te plota.</li>
    <br>
    <li>Numrat janë valid vetëm nëse kan kodet ndërkombëtare të telefonatës.</li>
    
</ol>
</div>
</article>

    <script>
       
       function formatTimeInput() {
    var inputTime = document.getElementById('Koha');
    var timeValue = inputTime.value;
    var formattedTime = timeValue.substring(0, 2) + ':00';
    inputTime.value = formattedTime;
}
    
        function validateReservation() {
            document.body.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)';
    
            var inputDate = document.getElementById('todayDate').value;
            var inputTime = document.getElementById('Koha').value;
    
    
            var selectedDate = new Date(inputDate + 'T' + inputTime);
            var currentDate = new Date();
    
            if (!inputDate || !inputTime) {
                Swal.fire({
                    title: 'Gabim në Validim',
                    text: 'Ju lutem vendosni si datën ashtu edhe kohën.',
                    icon: 'warning',
                    confirmButtonText: 'OK',
                    background: '#000000',
                    confirmButtonColor: '#ff0000',
                    iconColor: '#ff0000',
                });
                return;
            }
            var selectedDateTime = new Date(inputDate + 'T' + inputTime);
var currentDate = new Date();
currentDate.setDate(currentDate.getDate() + 1);

if (selectedDateTime < currentDate) {
    Swal.fire({
        title: 'Gabim në Validim',
        text: 'Duhet të kryeni rezervimin të paktën një ditë para datës së dëshiruar.',
        icon: 'warning',
        confirmButtonText: 'OK',
        background: '#000000',
        confirmButtonColor: '#ff0000',
        iconColor: '#ff0000',
    });
    return;
}
            var dayOfWeek = selectedDate.getDay();
            var selectedHour = selectedDate.getHours();
    
            switch (dayOfWeek) {
    case 0:
    case 6:
        if (selectedHour < 11 || selectedHour > 19) {
            handleValidation();
        }
        break;
    case 1:
        handleValidation();
        break;
    case 2:
    case 3:
    case 4:
    case 5:
        if (selectedHour < 10 || selectedHour > 19) {
            handleValidation();
        }
        break;
    default:
       
}
function handleValidation() {
    event.preventDefault();
    Swal.fire({
        title: 'Validation Error',
        text: "Observatori eshte mbyllur",
        icon: 'warning',
        confirmButtonText: 'OK',
    });
    return;
}
    
            
            showUserDetailsInput();
        }
    
        function showUserDetailsInput() {
        const generatedId = generateRandomNumericId(8);
        const captchaText = generateRandomString(4);

        Swal.fire({
            title: 'Vendosni Të Dhënat Tuaja',
            html:
                '<input id="swal-input-name" class="swal2-input" placeholder="Emri" autocomplete="given-name">' +
                '<input id="swal-input-surname" class="swal2-input" placeholder="Mbiemri" autocomplete="family-name">' +
                '<input id="swal-input-phone" class="swal2-input" placeholder="Numri i Telefonit" autocomplete="tel">' +
                '<input id="swal-input-captcha" class="swal2-input" style="font-family: Arial, sans-serif;" placeholder="CAPTCHA: ' +
                captchaText +
                '">',
            allowOutsideClick: false,
            allowEscapeKey: false,
            confirmButtonText: 'Dërgo',
            background: '#000000',
            confirmButtonColor: '#00ff00',
            iconColor: '#00ff00',
            customClass: {
                confirmButton: 'custom-confirm-button',
            },
            preConfirm: function () {
                const name = Swal.getPopup().querySelector('#swal-input-name').value.trim();
                const surname = Swal.getPopup().querySelector('#swal-input-surname').value.trim();

                const phone = Swal.getPopup().querySelector('#swal-input-phone').value;
                const captchaInput = Swal.getPopup().querySelector('#swal-input-captcha').value;

                if (captchaInput !== captchaText) {
                    Swal.showValidationMessage('CAPTCHA incorrect. Please try again.');
                    return false;
                }

                if (!name || !surname || !phone) {
                    Swal.showValidationMessage('Ju lutem plotësoni të gjitha fushat.');
                    return false;
                }

                const nameRegex = /^[a-zA-Z]{3,}$/;
                const surnameRegex = /^[a-zA-Z]{3,}$/;

                if (!nameRegex.test(name) || !surnameRegex.test(surname)) {
                    Swal.showValidationMessage(
                        'Emri dhe mbiemri duhet të përmbajnë vetëm shkronja dhe të jenë të paktën 3 shkronjat.'
                    );
                    return false;
                }

                const phoneNumberRegex = /^\+\d{10,11}$/;

                if (!phoneNumberRegex.test(phone)) {
                    Swal.showValidationMessage('Numri i telefonit i pavlefshëm.');
                    return false;
                }

                return { name: name, surname: surname, phone: phone, id: generatedId };
            },
            allowEnterKey: true,
        }).then((result) => {
            if (result.isConfirmed && result.value) {
                console.log(result.value);

                document.body.style.boxShadow = 'none';

                Swal.fire({
                    title: 'Rezervimi është kryer me sukses!',
                    text: 'Rezervimi juaj është dërguar me sukses. ID: ' + generatedId,
                    icon: 'success',
                    confirmButtonText: 'OK',
                    background: '#000000',
                    confirmButtonColor: '#00ff00',
                    iconColor: '#00ff00',
                });
            }
        });
    }

   
       
    function generateRandomNumericId(length) {
    const numericCharacters = ['0', '2', '4', '6', '8', '10', '12', '14', '16', '18'];

    
    const mappedAndFiltered = numericCharacters
        .map(char => Number(char) * 2) 
        .filter(result => result % 2 === 0); 

   
    const result = Array.from({ length }, () => mappedAndFiltered[Math.floor(Math.random() * mappedAndFiltered.length)])
        .reduce((acc, char) => acc + char, '');

    return result;
}



    function generateRandomString(length) {
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        let result = '';
        for (let i = 0; i < length; i++) {
            result += characters.charAt(Math.floor(Math.random() * characters.length));
        }
        return result;
    }


        window.addEventListener('scroll', function () {
            var header = document.querySelector('header');
    
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    
    
        document.getElementById('todayDate').value = new Date().toISOString().split('T')[0];
    
  
        document.getElementById('registerButton').addEventListener('click', validateReservation);
    </script>
    <script>
        $("#myElement").slideUp(5000, function() {
          
        
        });
      </script>
      <script>
        var myAudio = document.getElementById("myAudio");
        myAudio.volume = 0.1;
    </script>
    
    <footer>
        <h4>Observatori i Prishtinës</h4>
        <hr>
        <address>Pallati i Rinisë, Prishtina 10000</address>
        <p>Numri i telefonit: +383 44 702 270</p>
        <p class="p1">Na vizitoni:</p>
        <a href="https://www.instagram.com/prishtina.observatory/?utm_source=ig_web_button_share_sheet&igshid=OGQ5ZDc2ODk2ZA==" target="_blank">
            <img src="ig.png" alt="iglogo">
        </a>
        <a href="mailto:astroclubkosova@gmail.com" target="_blank">
            <img src="gm.jpg" alt="logogmail">
        </a>
        <a href="https://www.facebook.com/AstronomyClubKosova?mibextid=LQQJ4d" target="_blank">
            <img src="fb.jpg" alt="facebooklogo">
        </a>
    </footer>
  
  

</body>

</html>
